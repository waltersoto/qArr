(function(){var _qArr=function(_array){var arr=[];if(_array.constructor!==Array){throw new Error("This object only works with Arrays")}arr=_array.slice(0);this.where=function(fn){var sub=[];(function(a){for(var i=0,max=a.length;i<max;i++){if(fn(arr[i],i)){sub.push(arr[i])}}})(arr);arr=sub;return this};this.forEach=function(fn){if(arr.length>0&&typeof fn==="function"){for(var fi=0,fm=arr.length;fi<fm;fi++){fn(arr[fi],fi)}}return this};this.select=function(fn){var sub=[];(function(a){for(var i=0,max=a.length;i<max;i++){sub.push(fn(a[i],i))}})(arr);arr=sub;return this};this.orderByDescending=function(fn){var sub=[];if(arr.length>0){if(typeof arr[0]==="string"){sub=arr.sort().reverse()}else{sub=arr.sort(function(a,b){if(typeof fn!=="function"){if(!isNaN(parseFloat(a))){return -(parseFloat(a)-parseFloat(b))}return -(a.toUpperCase().localeCompare(b.toUpperCase()))}if(!isNaN(parseFloat(fn(a)))){return -(parseFloat(fn(a))-parseFloat(fn(b)))}return -fn(a).toUpperCase().localeCompare(fn(b).toUpperCase())})}arr=sub}return this};this.orderBy=function(fn){var sub=[];if(arr.length>0){if(typeof arr[0]==="string"){sub=arr.sort()}else{sub=arr.sort(function(a,b){if(typeof fn!=="function"){if(!isNaN(parseFloat(a))){return parseFloat(a)-parseFloat(b)}return a.toUpperCase().localeCompare(b.toUpperCase())}if(!isNaN(parseFloat(fn(a)))){return parseFloat(fn(a))-parseFloat(fn(b))}return fn(a).toUpperCase().localeCompare(fn(b).toUpperCase())})}arr=sub}return this};this.first=function(fn){if(typeof fn==="function"){this.where(fn)}if(arr.length>0){return arr[0]}return null};this.last=function(fn){if(typeof fn==="function"){this.where(fn)}if(arr.length>0){return arr[arr.length-1]}return null};this.single=function(fn){this.where(fn);if(arr.length==1){return arr[0]}return null};this.elementAt=function(index){if(arr.length>index){return arr[index]}return null};this.count=function(fn){if(typeof fn!=="function"){return arr.length}return this.where(fn).toArray().length};this.skip=function(num){if(arr.length>0&&num>0){if(arr.length>num){arr=arr.slice(num)}}return this};this.take=function(num){if(arr.length>0&&num>0){if(arr.length>num){arr=arr.slice(0,num)}}return this};this.union=function(nArr){arr=arr.concat(nArr);this.distinct();return this};this.page=function(pg,size){if(typeof size==="undefined"){size=10}if(arr.length>0){arr=this.skip((pg-1)*size).take(size).toArray()}return this};var contains=function(array,o){for(var s=0,sm=array.length;s<sm;s++){if(JSON.stringify(array[s])===JSON.stringify(o)){return true}}return false};this.contains=function(item){return contains(arr,item)};var _any=function(array,fn){for(var i=0,m=array.length;i<m;i++){if(fn(array[i])){return true}}return false};this.any=function(fn){return _any(arr,fn)};this.distinct=function(){var uni=[];if(arr.length>0){for(var i=0,m=arr.length;i<m;i++){if(!contains(uni,arr[i])){uni.push(arr[i])}}arr=uni.slice(0)}return this};this.shuffle=function(){if(arr.length>0){var n=arr.length;while(n){var j=Math.floor(Math.random()*(--n+1));var tempN=arr[n];var tempJ=arr[j];arr[n]=tempJ;arr[j]=tempN}}return this};var _index=function(fn,last){var index=-1;for(var i=0,max=arr.length;i<max;i++){if(fn(arr[i])){index=i;if(!last){break}}}return index};this.lastIndexOf=function(fn){return _index(fn,true)};this.indexOf=function(fn){return _index(fn,false)};this.sum=function(){var count=0;if(arr.length>0){for(var i=0,m=arr.length;i<m;i++){if(!isNaN(arr[i])){count+=parseInt(arr[i])}}}return count};this.groupBy=function(fn){var uni=[];if(arr.length>0){for(var i=0,m=arr.length;i<m;i++){if(!contains(uni,fn(arr[i]))){uni.push({key:fn(arr[i]),obj:arr[i]})}}var g=[];for(var k=0,mk=uni.length;k<mk;k++){if(!_any(g,function(n){return n.key==uni[k].key})){g.push({key:uni[k].key,item:[]})}var index=qA(g).indexOf(function(n){return n.key===uni[k].key});if(index!==-1&&index<uni.length){g[index].item.push(qA(uni).elementAt(k).obj)}}arr=g.slice(0)}return this};this.except=function(excludeArr){if(excludeArr.constructor===Array){var uni=[];if(arr.length>0){for(var i=0,m=arr.length;i<m;i++){if(!contains(excludeArr,arr[i])){uni.push(arr[i])}}arr=uni.slice(0)}}return this};this.toArray=function(){return arr}};var qA=function(arr){return new _qArr(arr)};if(typeof window!=="undefined"){if(!window.qA){window.qA=qA}}else{if(typeof module!=="undefined"&&module.exports){module.exports=qA}}})();